#!/usr/bin/env node

"use strict";

const checkCertExpiration = require('../');
const path = require('path');

if (process.argv.length < 3) {
    console.error(`usage: ${path.basename(process.argv[1])} [hostnameOrUrl...]`);
    process.exit(1);
}

process.argv.slice(2).forEach(async (url) => {
    try {
        const { host, port, valid_to, daysLeft } = await checkCertExpiration(url);
        console.log(`host=${host} port=${port} valid_to=${valid_to} daysLeft=${daysLeft}`);
    } catch (err) {
        console.error(err);
        process.exit(1);
        return;
    }
});
